package com.currency.currencyconversionservice.service;

import java.util.HashMap;
import java.util.Map;

import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Service;
import org.springframework.web.client.RestTemplate;

import com.currency.currencyconversionservice.entity.CurrencyConverted;
import com.currency.currencyconversionservice.entity.CurrencyRate;


@Service
public class CurrencyServiceClass implements CurrencyService {

	@Override
	public CurrencyConverted getConversionRate(String from, String to, Integer quantity) {
		
		Map<String, String> uriVariables = new HashMap<String,String>();
		uriVariables.put("from", from);
		uriVariables.put("to",to);
		
//		String url="";
//		ResponseEntity<CurrencyRate> currencyRate = new RestTemplate().getForEntity(url, CurrencyRate.class, uriVariables);
		
		
		//returning dummy response;
		CurrencyRate temp = new CurrencyRate();
		temp.setSuccess(true);
		temp.setTimestamp(1519296206);
		temp.setBase(from);
		temp.setDate("2023-09-23");
		
		Map<String, Double> map = new HashMap<String, Double>();
		map.put("AUD", 1.566015);
		map.put("CAD", 1.560132);
		map.put("CHF", 1.154727);
		map.put("USD", 1.23396);
		
		temp.setRates(map);
		
		// currency rate to currency Converted
		CurrencyConverted converted = new CurrencyConverted(temp.getBase(),"INR", 2500);
		
		return converted;
	}

}
//
//
//{
//    "success": true,
//    "timestamp": 1519296206,
//    "base": "EUR",
//    "date": "2023-09-23",
//    "rates": {
//        "AUD": 1.566015,
//        "CAD": 1.560132,
//        "CHF": 1.154727,
//        "CNY": 7.827874,
//        "GBP": 0.882047,
//        "JPY": 132.360679,
//        "USD": 1.23396,
//    }
//}
